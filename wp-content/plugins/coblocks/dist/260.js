"use strict";(self.webpackChunkcoblocks=self.webpackChunkcoblocks||[]).push([[260],{9260:function(e,t,l){l.r(t),l.d(t,{default:function(){return O}});var o=l(7462),a=l(9307),n=l(4184),c=l.n(n),s=l(5736),i=[{
/* translators: visual style option */
label:(0,s.__)("Dark","coblocks"),value:"dark"},{
/* translators: visual style option */
label:(0,s.__)("Light","coblocks"),value:"light"},{
/* translators: visual style option */
label:(0,s.__)("None","coblocks"),value:"none"}],r=[{label:(0,s.__)("None","coblocks"),value:"none"},{label:(0,s.__)("Media file","coblocks"),value:"media"},{label:(0,s.__)("Attachment page","coblocks"),value:"attachment"},{label:(0,s.__)("Custom URL","coblocks"),value:"custom"}],u=l(5609);class b extends a.Component{constructor(){super(...arguments),this.setNewTab=this.setNewTab.bind(this),this.setLinkRel=this.setLinkRel.bind(this),this.setLinkTo=this.setLinkTo.bind(this)}componentDidUpdate(e){const{attributes:t,setAttributes:l}=this.props,{lightbox:o}=t;"none"!==e.attributes.linkTo&&o&&l({linkTo:"none"})}setLinkTo(e){const{setAttributes:t}=this.props;t({linkTo:e})}setLinkRel(e){const{setAttributes:t}=this.props;t({rel:e})}setNewTab(e){const{attributes:t,setAttributes:l}=this.props,{rel:o}=t,a=e?"_blank":void 0;let n=o;a&&!o?n="noreferrer noopener":a||"noreferrer noopener"!==o||(n=void 0),l({rel:n,target:a})}render(){const{attributes:e,setAttributes:t}=this.props,{lightbox:l,linkTo:o,target:n,rel:c}=e;return(0,a.createElement)(a.Fragment,null,!l&&(0,a.createElement)(u.PanelBody,{initialOpen:!1,title:(0,s.__)("Link settings","coblocks")},(0,a.createElement)(u.SelectControl,{label:(0,s.__)("Link to","coblocks"),onChange:this.setLinkTo,options:r,value:o}),"none"!==o&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(u.ToggleControl,{checked:"_blank"===n,label:(0,s.__)("Open in new tab","coblocks"),onChange:this.setNewTab}),(0,a.createElement)(u.TextControl
/* translators: html attribute that specifies the relationship between two pages */,{label:(0,s.__)("Link rel","coblocks"),onChange:e=>t({rel:e}),value:c}))))}}var m=b,p=l(2819),_=l.n(p),k=l(7635);const g=[{value:1,
/* translators: abbreviation for small size */
label:(0,s.__)("S","coblocks"),tooltip:(0,s.__)("Small","coblocks")},{value:2,
/* translators: abbreviation for medium size */
label:(0,s.__)("M","coblocks"),tooltip:(0,s.__)("Medium","coblocks")},{value:3,
/* translators: abbreviation for large size */
label:(0,s.__)("L","coblocks"),tooltip:(0,s.__)("Large","coblocks")},{value:4,
/* translators: abbreviation for extra large size */
label:(0,s.__)("XL","coblocks"),tooltip:(0,s.__)("Extra Large","coblocks")}],d={value:0,label:(0,s.__)("None","coblocks"),tooltip:(0,s.__)("None","coblocks")},h={value:"custom",label:(0,a.createElement)(u.Icon,{icon:k.ewm}),tooltip:(0,s.__)("Custom","coblocks")};class v extends a.Component{render(){const{advancedMaxValue:e,advancedMinValue:t,currentOption:l,label:o,onChange:n,options:s,showAdvancedControls:i,showIcons:r,showNoneOption:b,showCustomOption:m}=this.props;let _=s||g;return b&&(_=[d,..._]),m&&(_=[..._,h]),i&&!1!==t&&!1!==e?(0,a.createElement)(u.RangeControl,{label:o,value:l,onChange:e=>n(e),min:t,max:e}):(0,a.createElement)(u.BaseControl,{id:`coblocks-option-selector-${(0,p.kebabCase)(o)}`,label:o,className:c()("coblocks-option-selector-control",{"is-custom":"custom"===l})},(0,a.createElement)(u.PanelRow,null,(0,a.createElement)(u.ButtonGroup,{"aria-label":o},_.map((e=>(0,a.createElement)(u.Tooltip,{key:`option-${e.value}`,text:e.tooltip},(0,a.createElement)(u.Button,{isSecondary:l!==e.value,isPrimary:l===e.value,"aria-pressed":l===e.value,onClick:()=>n(e.value),"aria-label":e.tooltip},r?e.icon:e.label)))))))}}const E=[{
/* translators: abbreviation for small size */
label:(0,s.__)("S","coblocks"),tooltip:(0,s.__)("Small","coblocks"),value:"small"},{
/* translators: abbreviation for medium size */
label:(0,s.__)("M","coblocks"),tooltip:(0,s.__)("Medium","coblocks"),value:"medium"},{
/* translators: abbreviation for large size */
label:(0,s.__)("L","coblocks"),tooltip:(0,s.__)("Large","coblocks"),value:"large"}];var C=e=>{const{attributes:t,setAttributes:l}=e,{align:o,gutter:n,gutterCustom:c}=t,i="full"===o?10:5;return(0,a.useEffect)((()=>{c>i&&l({gutterCustom:i})}),[c,i]),(0,a.createElement)(a.Fragment,null,(0,a.createElement)(v,{currentOption:n,label:(0,s.__)("Gutter","coblocks"),onChange:e=>l({gutter:e}),options:E,showCustomOption:!0}),"custom"===n&&(0,a.createElement)(u.RangeControl,{initialValue:0,max:i,min:0,onChange:e=>l({gutterCustom:e.toString()}),step:.1,value:parseFloat(c)||0,withInputField:!0}))},w=l(2175),f=e=>{const{attributes:t,setAttributes:l,enableGutter:o,enableCaptions:n}=e,{shadow:c,captions:r,captionStyle:b,lightbox:p}=t,_=[{value:"sm",
/* translators: abbreviation for small size */
label:(0,s.__)("S","coblocks"),tooltip:(0,s.__)("Small","coblocks")},{value:"md",
/* translators: abbreviation for medium size */
label:(0,s.__)("M","coblocks"),tooltip:(0,s.__)("Medium","coblocks")},{value:"lg",
/* translators: abbreviation for large size */
label:(0,s.__)("L","coblocks"),tooltip:(0,s.__)("Large","coblocks")}];return(0,a.createElement)(w.InspectorControls,null,(0,a.createElement)(u.PanelBody,{title:(0,s.__)("Collage settings","coblocks")},o&&(0,a.createElement)(C,e),!o&&(0,a.createElement)(v,{label:(0,s.__)("Shadow","coblocks"),options:_,currentOption:c,showNoneOption:!0,onChange:t=>{return l=t,void e.setAttributes({shadow:l});var l}}),(0,a.createElement)(u.ToggleControl,{label:(0,s.__)("Lightbox","coblocks"),checked:!!p,onChange:()=>l({lightbox:!p}),help:e=>e?(0,s.__)("Image lightbox is enabled.","coblocks"):(0,s.__)("Toggle to enable the image lightbox.","coblocks")}),n&&(0,a.createElement)(u.ToggleControl,{label:(0,s.__)("Captions","coblocks"),checked:!!r,onChange:()=>l({captions:!r}),help:e=>e?(0,s.__)("Showing captions for each media item.","coblocks"):(0,s.__)("Toggle to show media captions.","coblocks")}),r&&(0,a.createElement)(u.SelectControl,{label:(0,s.__)("Caption style","coblocks"),value:b,onChange:t=>{e.setAttributes({captionStyle:t})},options:i})),(0,a.createElement)(m,e))},y=l(9818);const N=e=>{let{hoveredFilter:t}=e;if(!t)return null;const l=_().cloneDeep((0,y.select)("core/block-editor").getSelectedBlock());return l.attributes.filter=t,(0,a.createElement)("div",{className:"block-editor-block-switcher__popover__preview__parent"},(0,a.createElement)("div",{className:"block-editor-block-switcher__popover__preview__container"},(0,a.createElement)(u.Popover,{className:"block-editor-block-switcher__preview__popover coblocks-image-filter-popover",focusOnMount:!1,position:"bottom right"},(0,a.createElement)("div",{className:"block-editor-block-switcher__preview coblocks__preview"},(0,a.createElement)("div",{className:"block-editor-block-switcher__preview-title"},(0,s.__)("Preview filter","coblocks")),(0,a.createElement)(w.BlockPreview,{autoHeight:!0,blocks:{...l}})))))};var S=e=>{const[t,l]=(0,a.useState)(null),o=e=>{l(e)},{attributes:n,setAttributes:i}=e,{filter:r}=n,b=[{icon:(0,a.createElement)(u.Icon,{icon:k.mJk}),isActive:"none"===r,onClick:()=>{i({filter:"none"})},slug:"none",
/* translators: image style */
title:(0,s.__)("Original","coblocks")},{icon:(0,a.createElement)(u.Icon,{icon:k.NC1}),isActive:"grayscale"===r,onClick:()=>{i({filter:"grayscale"})},slug:"grayscale",
/* translators: image style */
title:(0,s.__)("Grayscale filter","coblocks")},{icon:(0,a.createElement)(u.Icon,{icon:k.amg}),isActive:"sepia"===r,onClick:()=>{i({filter:"sepia"})},slug:"sepia",
/* translators: image style */
title:(0,s.__)("Sepia filter","coblocks")},{icon:(0,a.createElement)(u.Icon,{icon:k.swD}),isActive:"saturation"===r,onClick:()=>{i({filter:"saturation"})},slug:"saturation",
/* translators: image style */
title:(0,s.__)("Saturation filter","coblocks")},{icon:(0,a.createElement)(u.Icon,{icon:k.tu4}),isActive:"dim"===r,onClick:()=>{i({filter:"dim"})},slug:"dim",
/* translators: image style */
title:(0,s.__)("Dim filter","coblocks")},{icon:(0,a.createElement)(u.Icon,{icon:k.jZD}),isActive:"vintage"===r,onClick:()=>{i({filter:"vintage"})},slug:"vintage",
/* translators: image style */
title:(0,s.__)("Vintage filter","coblocks")}];return(0,a.createElement)(u.ToolbarGroup,null,(0,a.createElement)(u.DropdownMenu,{className:c()("components-coblocks-media-filter","none"!==r?"has-filter":""),icon:(0,a.createElement)(u.Icon,{icon:k.AF8}),label:(0,s.__)("Apply filter","coblocks"),noIcons:!0,popoverProps:{className:"components-coblocks-dropdown"}},(()=>(0,a.createElement)(u.MenuGroup,null,(0,a.createElement)(N,{hoveredFilter:t}),b.map((e=>(0,a.createElement)(u.MenuItem,{icon:e.icon,isSelected:r===e.slug,key:`coblocks-image-filter-${e.slug}`,label:e.title,onClick:e.onClick,onMouseEnter:()=>o(e.slug),onMouseLeave:()=>o(null),role:"menuitemradio"},e.title)))))))},L=e=>{const{attributes:t}=e,{images:l}=t,o=!!l.filter((e=>void 0!==e.id)).length;return(0,a.createElement)(w.BlockControls,null,o&&(0,a.createElement)(S,e))},x=l(2547),T=l(3264),A=l(2238),I=e=>{const{noticeOperations:t,onSelect:l,label:o}=e;return(0,a.createElement)(u.DropZone,{label:o,onFilesDrop:e=>{(0,A.mediaUpload)({allowedTypes:x.o2,filesList:e,onError:t.createErrorNotice,onFileChange:e=>l(e)})}})},M=l(4333),B=l(1313),D=l(444),F=(0,a.createElement)(D.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(D.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),O=(0,M.compose)([u.withNotices])((e=>{const[t,l]=(0,a.useState)(null),[n,i]=(0,a.useState)(null),[r,b]=(0,a.useState)(!1),m=(0,M.usePrevious)(e.className),p=(0,M.usePrevious)(e.isSelected);(0,a.useEffect)((()=>{e.className!==m&&(e.className.includes("is-style-layered")?(i(e.attributes.gutter),e.setAttributes({gutter:"small"})):(i(null),e.setAttributes({shadow:"none",gutter:n||C.gutter})))}),[e.className,m]),(0,a.useEffect)((()=>{e.isSelected!==p&&!1===e.isSelected&&l(null)}),[e.isSelected,p]);const _=t=>{const{attributes:l}=e;return l.images.find((e=>parseInt(e.index)===parseInt(t)))},k=t=>{const{noticeOperations:l}=e;l.removeAllNotices(),l.createErrorNotice(t)},g=(t,l)=>{const{attributes:o,setAttributes:a}=e;a({images:[...o.images.filter((e=>parseInt(e.index)!==parseInt(l))),{...x.oj(t),index:l}]})},d=(t,l)=>{const{attributes:o,setAttributes:a}=e,n=_(t);a({images:[...o.images.filter((e=>parseInt(e.index)!==parseInt(t))),Object.assign({},n,l)]})},h=()=>{b(!0)},v=o=>{const n=_(o),i=e.isSelected&&t===n.index,b=!e.className.includes("is-style-layered"),m=(0,a.createElement)(u.DropZone,{onFilesDrop:e=>((e,t)=>{(0,A.mediaUpload)({allowedTypes:["image"],filesList:e,onFileChange:e=>{let[l]=e;return g(l,t)},onError:k})})(e,o),label:(0,s.__)("Drop image to replace","coblocks")});return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("a",{role:"button",tabIndex:"0",onClick:()=>(e=>{t!==e&&l(e)})(n.index)},(0,a.createElement)("figure",{className:c()({"wp-block-coblocks-gallery-collage__figure":!0,"is-transient":(0,B.isBlobURL)(n.url),"is-selected":i,[`shadow-${e.attributes.shadow}`]:e.attributes.shadow})},i&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(u.ButtonGroup,{className:"block-library-gallery-item__inline-menu is-right is-visible"},(0,a.createElement)(w.MediaUploadCheck,null,(0,a.createElement)(w.MediaUpload,{allowedTypes:["image"],onSelect:e=>g(e,o),value:n.url,render:e=>{let{open:t}=e;return(0,a.createElement)(u.Button,{className:"coblocks-gallery-item__button-replace",onClick:t,label:(0,s.__)("Replace Image","coblocks")},(0,s.__)("Replace","coblocks"))}})),(0,a.createElement)(u.Button,{icon:F,onClick:()=>(t=>{const{attributes:l,setAttributes:o}=e;o({images:[...l.images.filter((e=>parseInt(e.index)!==parseInt(t)))]})})(o),label:(0,s.__)("Remove image","coblocks"),disabled:!i}))),t===n.index&&"custom"===e.attributes.linkTo&&(0,a.createElement)("form",{className:"components-coblocks-gallery-item__image-link",onSubmit:e=>e.preventDefault()},(0,a.createElement)(u.Dashicon,{icon:"admin-links"}),(0,a.createElement)(w.URLInput,{value:n.imgLink,onChange:e=>d(o,{imgLink:e})}),(0,a.createElement)(u.Button,{icon:r?"saved":"editor-break",label:r?(0,s.__)("Saving","coblocks"):(0,s.__)("Apply","coblocks"),onClick:h,type:"submit"})),m,(0,B.isBlobURL)(n.url)&&(0,a.createElement)(u.Spinner,null),(0,a.createElement)("img",{src:n.url,alt:n.alt}),b&&e.attributes.captions&&(n.caption||i)&&(0,a.createElement)(w.RichText,{tagName:"figcaption",placeholder:(0,s.__)("Write captionâ€¦","coblocks"),className:"coblocks-gallery--caption",value:n.caption,onChange:e=>d(o,{caption:e}),isSelected:i,inlineToolbar:!0}))))},E=t=>{const l=!!_(t),n=c()("wp-block-coblocks-gallery-collage__figure",{[`shadow-${e.attributes.shadow}`]:e.attributes.shadow});return(0,a.createElement)(w.MediaPlaceholder,{addToGallery:!0,className:n,allowedTypes:["image"],disableDropZone:!0,disableMediaButtons:l,accept:"image/*",multiple:!1,icon:!1,labels:{title:" ",instructions:" "},onSelect:e=>g(e,t),onError:k},(0,a.createElement)(I,(0,o.Z)({},e,{label:"Drop file to upload",onSelect:e=>{let[l]=e;return g(l,t)}})))},{attributes:C,className:y,noticeUI:N}=e,{animation:S,captions:D,captionStyle:O,filter:R,lightbox:P}=C,G=!y.includes("is-style-layered"),U=!y.includes("is-style-layered"),$=[];for(let l=0;l<(["is-style-tiled","is-style-layered"].includes(e.attributes.className)?4:5);l++){const e=_(l);$.push((0,a.createElement)("li",{key:`image-${l}`,className:c()("wp-block-coblocks-gallery-collage__item",`item-${l+1}`,{[`coblocks-animate ${S}`]:S,"is-selected":l===parseInt(t)})},e?v(l):E(l)))}return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(L,e),(0,a.createElement)(f,(0,o.Z)({},e,{enableGutter:G,enableCaptions:U})),N,(0,a.createElement)(T.Z,C,(0,a.createElement)("div",{className:c()(y,{[`has-filter-${R}`]:"none"!==R,[`has-caption-style-${O}`]:D&&void 0!==O,"has-lightbox":P})},(0,a.createElement)("ul",null,$))))}))}}]);